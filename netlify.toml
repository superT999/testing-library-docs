[build]
  # Directory (relative to root of your repo) that contains the deploy-ready
  # HTML files and assets generated by the build
  publish = "website/build/testing-library-docs"

  # Default build command
  command = "cd website; npm install; npm run format-docs; npm run build"

[dev]
  # A Boolean value that determines if Netlify Dev launches the local server address in your browser
  autoLaunch = true

# Redirects

# Domains
[[redirects]]
  from = "https://react-testing-library.com/"
  to = "/react/"
  force = true
[[redirects]]
  from = "https://react-testing-library.com/*"
  to = "/:splat"
  force = true
[[redirects]]
  from = "https://testing-library.netlify.com/*"
  to = "/:splat"
  force = true

# Shortcut to Discord server invite
[[redirects]]
  from = "/discord"
  to = "https://discord.gg/c6JN9fM"

# Support page to help page
[[redirects]]
  from = "/support"
  to = "/help"

# React Redux recipe to Redux's recipe
[[redirects]]
  from = "/docs/example-react-redux"
  to = "https://redux.js.org/recipes/writing-tests#connected-components"

# Reorganization (do not redirect if route is not 404)
[[redirects]]
  from = "/docs/*"
  to = "/docs/dom-testing-library/:splat"

# Landing pages
[[redirects]]
  from = "/dom/"
  to = "/docs/dom-testing-library/intro"
[[redirects]]
  from = "/react/"
  to = "/docs/react-testing-library/intro"
[[redirects]]
  from = "/react-native/"
  to = "/docs/react-native-testing-library/intro"
[[redirects]]
  from = "/cypress/"
  to = "/docs/cypress-testing-library/intro"
[[redirects]]
  from = "/vue/"
  to = "/docs/vue-testing-library/intro"
[[redirects]]
  from = "/angular/"
  to = "/docs/angular-testing-library/intro"
[[redirects]]
  from = "/pptr/"
  to = "/docs/pptr-testing-library/intro"
[[redirects]]
  from = "/svelte/"
  to = "/docs/svelte-testing-library/intro"
[[redirects]]
  from = "/preact/"
  to = "/docs/preact-testing-library/intro"
[[redirects]]
  from = "/jest-dom/"
  to = "/docs/ecosystem-jest-dom"
[[redirects]]
  from = "/testcafe/"
  to = "/docs/testcafe-testing-library/intro"
[[redirects]]
  from = "/nightwatch/"
  to = "/docs/nightwatch-testing-library/intro"
[[redirects]]
  from = "https://testing-library.com/docs/example-react-redux"
  to = "https://redux.js.org/recipes/writing-tests#connected-components"

# Redirect screen error message to correct page
[[redirects]]
  from = "https://testing-library.com/s/screen-global-error"
  to = "https://testing-library.com/docs/dom-testing-library/api-queries#screen"
